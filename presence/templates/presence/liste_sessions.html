{% extends "presence/base.html" %}

{% block title %}Liste des sessions{% endblock %}

{% block content %}
<div class="container">
    <h2 class="section-title">ğŸ“… Liste des sessions d'aujourd'hui</h2>

    {% if sessions_today %}
        <div class="session-today">
            <h3>ğŸŸ¢ Session aujourd'hui ({{ today }})</h3>
            {% for session in sessions_today %}
                <div class="session-box today-box">
                    <strong>{{ session.heure_debut }} - {{ session.heure_fin }}</strong><br>
                    <em>{{ session.theme|linebreaksbr }}</em><br>
                    <small>{{ session.presences.count }} licenciÃ©s prÃ©sents</small><br>
                    {% if session.created_by %}
                        <small>CrÃ©Ã©e par : {{ session.created_by.get_full_name|default:session.created_by.username }}</small><br>
                    {% endif %}
                    {% if session.checked_by %}
                        <small>VÃ©rifiÃ©e par : {{ session.checked_by.get_full_name|default:session.checked_by.username }}</small><br>
                    {% endif %}
                    <a href="{% url 'voir_session' session.id %}">ğŸ” Voir</a> |
                    <a href="{% url 'modifier_session' session.id %}">âœï¸ Modifier cette session</a>
                    <a href="{% url 'confirmer_suppression_session' session.id %}">ğŸ—‘ï¸ Supprimer</a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="no-session-today">âŒ Pas de session aujourd'hui.</p>
    {% endif %}

    <hr class="session-separator">
    <h2 class="section-title">ğŸ“… Liste des prochaines sessions </h2>

    {% if sessions %}
        <ul class="session-list">
            {% for session in sessions %}
                <li class="session-box">
                    <strong>{{ session.date }}</strong> â€” de {{ session.heure_debut }} Ã  {{ session.heure_fin }}<br>
                    <em>{{ session.theme|linebreaksbr }}</em><br>
                    <small>{{ session.presences.count }} licenciÃ©s prÃ©sents</small><br>
                    {% if session.created_by %}
                        <small>CrÃ©Ã©e par : {{ session.created_by.get_full_name|default:session.created_by.username }}</small><br>
                    {% endif %}
                    {% if session.checked_by %}
                        <small>VÃ©rifiÃ©e par : {{ session.checked_by.get_full_name|default:session.checked_by.username }}</small><br>
                    {% endif %}
                    <a href="{% url 'voir_session' session.id %}">ğŸ” Voir</a> |
                    <a href="{% url 'modifier_session' session.id %}">âœï¸ Modifier</a>
                    <a href="{% url 'confirmer_suppression_session' session.id %}">ğŸ—‘ï¸ Supprimer</a>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Aucune session enregistrÃ©e.</p>
    {% endif %}
</div>
{% endblock %}
