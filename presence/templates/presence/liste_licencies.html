{% extends "presence/base.html" %}

{% block title %}Liste des licenci√©s{% endblock %}

{% block content %}
<div class="container">
    <div class="header-row" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
        <h2>üë• Liste des licenci√©s</h2>
        <div>
            <a href="{% url 'ajouter_licencie' %}" class="btn-submit" style="margin-right: 10px;">‚ûï Ajouter</a>
            <a href="{% url 'export_licencies_excel' %}" class="btn-submit">üì• Exporter vers Excel</a>
        </div>
    </div>


    {% if licencies %}
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Pr√©nom</th>
                    <th>Nombre de participation</th>
                    <th>Derni√®re pr√©sence</th>
                    {% if user.is_authenticated %}
                        <th>Actions</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody>
                {% for licencie in licencies %}
                    <tr>
                        <td>{{ licencie.nom }}</td>
                        <td>{{ licencie.prenom }}</td>
                        <td>{{ licencie.nb_presences }}</td>
                        <td>
                            {% if licencie.last_session_date %}
                                {{ licencie.last_session_date|date:"d/m/Y" }}
                            {% else %}
                                Aucune session
                            {% endif %}
                        </td>
                        {% if user.is_authenticated %}
                            <td>
                                <a href="{% url 'modifier_licencie' licencie.id %}" style="margin-right: 10px;">‚úèÔ∏è Modifier</a>
                                <a href="{% url 'supprimer_licencie' licencie.id %}" style="color: red;">üóëÔ∏è Supprimer</a>
                            </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aucun licenci√© trouv√©.</p>
    {% endif %}
</div>
{% endblock %}
